
{
  "entities": {
    "ReviewPeriod": {
      "title": "ReviewPeriod",
      "type": "object",
      "description": "Defines the time boundary for all performance-related activities.",
      "properties": {
        "name": {
          "type": "string",
          "description": "Logical identifier for grouping cycles (e.g., FY25 Performance Cycle)"
        },
        "startDate": {
          "type": "string",
          "description": "Earliest date documents can be generated",
          "format": "date-time"
        },
        "endDate": {
          "type": "string",
          "description": "Latest completion date for documents",
          "format": "date-time"
        },
        "status": {
          "type": "string",
          "description": "Status of the review period (e.g., Active, Inactive, Completed)"
        }
      },
      "required": [
        "name",
        "startDate",
        "endDate",
        "status"
      ]
    },
    "PerformanceCycle": {
        "title": "PerformanceCycle",
        "type": "object",
        "description": "Defines a specific evaluation cycle within a review period.",
        "properties": {
            "name": { "type": "string" },
            "reviewPeriodId": { "type": "string" },
            "goalPlanId": { "type": "string" },
            "startDate": { "type": "string", "format": "date-time" },
            "endDate": { "type": "string", "format": "date-time" },
            "status": { "type": "string" }
        },
        "required": ["name", "reviewPeriodId", "goalPlanId", "startDate", "endDate", "status"]
    },
    "GoalPlan": {
      "title": "GoalPlan",
      "type": "object",
      "description": "Defines the goal container used inside performance documents.",
      "properties": {
        "name": {
          "type": "string",
          "description": "Identifies the goal template"
        },
        "reviewPeriodId": {
          "type": "string",
          "description": "Reference to ReviewPeriod."
        },
        "status": { "type": "string" }
      },
      "required": [
        "name",
        "reviewPeriodId",
        "status"
      ]
    },
    "Goal": {
      "title": "Goal",
      "type": "object",
      "description": "Represents a single goal for an employee within a goal plan.",
      "properties": {
        "goalPlanId": { "type": "string", "description": "Reference to the GoalPlan." },
        "technologist_type": { "type": "string", "enum": ["SENIOR", "JUNIOR"], "description": "The technologist type the goal applies to." },
        "name": { "type": "string", "description": "The name of the goal." },
        "description": { "type": "string", "description": "A detailed description of the goal." },
        "type": { "type": "string", "enum": ["Work", "Home"], "description": "The type of the goal." },
        "weight": { "type": "number", "description": "The weight of the goal in percentage." },
        "status": { "type": "string", "enum": ["Not Started", "In Progress", "Completed"], "description": "The status of the goal." }
      },
      "required": ["goalPlanId", "technologist_type", "name", "type", "status"]
    },
    "PerformanceTemplate": {
      "title": "PerformanceTemplate",
      "type": "object",
      "description": "Defines what kind of document is being created and how it behaves in the system.",
      "properties": {
        "name": { "type": "string" },
        "description": { "type": "string" },
        "category": { "type": "string", "enum": ["Performance", "Survey"] },
        "status": { "type": "string" }
      },
      "required": [ "name", "description", "category", "status" ]
    },
    "PerformanceTemplateSection": {
        "title": "PerformanceTemplateSection",
        "type": "object",
        "description": "Defines the core components that will constitute the performance document.",
        "properties": {
            "name": { "type": "string" },
            "type": { "type": "string" },
            "performanceTemplateId": { "type": "string" },
            "order": { "type": "number" },
            "permissions": {
                "type": "array",
                "items": {
                    "type": "object",
                    "properties": {
                        "role": { "type": "string" },
                        "view": { "type": "boolean" },
                        "rate": { "type": "boolean" },
                        "viewWorkerRatings": { "type": "boolean" },
                        "viewPrimaryAppraiserRatings": { "type": "boolean" },
                        "viewSecondaryAppraiserRatings": { "type": "boolean" }
                    },
                    "required": ["role", "view", "rate"]
                }
            },
            "enableSectionRatings": { "type": "boolean" },
            "sectionRatingMandatory": { "type": "boolean" },
            "ratingScale": { "type": "number" },
            "ratingCalculationMethod": { "type": "string" },
            "enableSectionComments": { "type": "boolean" },
            "sectionCommentMandatory": { "type": "boolean" },
            "minLength": { "type": "number" },
            "maxLength": { "type": "number" },
            "enableItemRatings": { "type": "boolean" },
            "itemRatingMandatory": { "type": "boolean" },
            "enableItemComments": { "type": "boolean" },
            "itemCommentMandatory": { "type": "boolean" }
        },
        "required": ["name", "type", "performanceTemplateId", "order", "permissions"]
    },
    "EvaluationFlow": {
      "title": "EvaluationFlow",
      "type": "object",
      "description": "Establishes the Performance Review lifecycle.",
      "properties": {
        "name": { "type": "string" },
        "steps": { 
            "type": "array",
            "items": {
                "type": "object",
                "properties": {
                    "id": { "type": "string" },
                    "sequence": { "type": "number" },
                    "task": { "type": "string" },
                    "role": { "type": "string" },
                    "flowType": { "type": "string" },
                    "startDate": { "type": "string", "format": "date-time" },
                    "endDate": { "type": "string", "format": "date-time" }
                },
                "required": ["id", "sequence", "task", "role", "flowType"]
            }
        },
        "status": { "type": "string" }
      },
      "required": ["name", "steps", "status"]
    },
     "EligibilityCriteria": {
      "title": "EligibilityCriteria",
      "type": "object",
      "description": "Defines rules for excluding employees from receiving the performance document.",
      "properties": {
        "name": { "type": "string" },
        "rules": {
            "type": "array",
            "items": {
                "type": "object",
                "properties": {
                    "id": { "type": "string" },
                    "type": { "type": "string" },
                    "values": { "type": "array", "items": { "type": "string" } }
                },
                "required": ["id", "type", "values"]
            }
        },
        "status": { "type": "string" }
      },
      "required": [ "name", "rules", "status" ]
    },
    "PerformanceDocument": {
      "title": "PerformanceDocument",
      "type": "object",
      "description": "Combines all previously defined components to create a live performance document.",
      "properties": {
        "name": { "type": "string" },
        "performanceCycleId": { "type": "string" },
        "goalPlanId": { "type": "string" },
        "performanceTemplateId": { "type": "string" },
        "sectionIds": { "type": "array", "items": { "type": "string" } },
        "evaluationFlowId": { "type": "string" },
        "eligibilityId": { "type": "string" },
        "isLaunched": { "type": "boolean", "description": "Indicates if the document has been launched to employees."}
      },
      "required": ["name", "performanceCycleId", "goalPlanId", "performanceTemplateId", "evaluationFlowId", "eligibilityId"]
    },
    "EmployeePerformanceDocument": {
        "title": "EmployeePerformanceDocument",
        "type": "object",
        "description": "An individual performance document assigned to a specific employee.",
        "properties": {
            "performanceDocumentId": { "type": "string" },
            "employeeId": { "type": "string" },
            "performanceCycleId": { "type": "string" },
            "performanceTemplateId": { "type": "string" },
            "evaluationFlowId": { "type": "string" },
            "status": { "type": "string" }
        },
        "required": ["performanceDocumentId", "employeeId", "performanceCycleId", "performanceTemplateId", "evaluationFlowId", "status"]
    },
    "AppraiserMapping": {
      "title": "AppraiserMapping",
      "type": "object",
      "description": "Maps an employee to a specific appraiser for a given performance cycle.",
      "properties": {
        "employeePersonNumber": {
          "type": "string",
          "description": "The personNumber of the employee being reviewed."
        },
        "performanceCycleId": {
          "type": "string",
          "description": "Reference to the PerformanceCycle."
        },
        "appraiserType": {
          "type": "string",
          "enum": ["Primary", "Secondary"],
          "description": "The role of the appraiser."
        },
        "appraiserPersonNumber": {
          "type": "string",
          "description": "The personNumber of the appraiser."
        },
        "evalGoalTypes": {
          "type": "string",
          "description": "Indicates the evaluation/goal relationship type (e.g., Work, Home, or comma-separated values like Work,Home)."
        },
        "isCompleted": {
          "type": "boolean",
          "description": "Indicates if the appraiser has completed their evaluation."
        }
      },
      "required": ["employeePersonNumber", "performanceCycleId", "appraiserType", "appraiserPersonNumber", "evalGoalTypes"]
    },
    "Employee": {
      "title": "Employee",
      "type": "object",
      "description": "Represents an employee in the organization.",
      "properties": {
        "personNumber": { "type": "string" },
        "personEmail": { "type": "string", "format": "email" },
        "firstName": { "type": "string" },
        "lastName": { "type": "string" },
        "designation": { "type": "string" },
        "personType": { "type": "string" },
        "department": { "type": "string" },
        "entity": { "type": "string" },
        "workManager": {
          "type": "string",
          "description": "The personNumber of the employee's work manager. References another employee."
        },
        "homeManager": {
          "type": "string",
          "description": "The personNumber of the employee's home manager. References another employee."
        },
        "technologist_type": {
            "type": "string",
            "enum": ["SENIOR", "JUNIOR"],
            "description": "The technologist type of the employee."
        }
      },
      "required": ["personNumber", "personEmail", "firstName", "lastName"]
    },
    "EmployeeEvaluation": {
      "title": "EmployeeEvaluation",
      "type": "object",
      "description": "Stores a single evaluation (rating and/or comment) for a section of an employee's performance document.",
      "properties": {
        "employeePerformanceDocumentId": {
          "type": "string",
          "description": "Reference to the EmployeePerformanceDocument being evaluated."
        },
        "sectionId": {
          "type": "string",
          "description": "Reference to the PerformanceTemplateSection being evaluated."
        },
        "evaluatorPersonNumber": {
          "type": "string",
          "description": "The personNumber of the user who submitted the evaluation."
        },
        "appraiserType": {
            "type": "string",
            "description": "Role of the evaluator for this document (e.g., Worker, Primary, Secondary)."
        },
        "rating": {
          "type": "number",
          "description": "The rating given for the section."
        },
        "comment": {
          "type": "string",
          "description": "The comment given for the section."
        },
        "submittedAt": {
            "type": "string",
            "format": "date-time",
            "description": "Timestamp of when the evaluation was submitted."
        }
      },
      "required": ["employeePerformanceDocumentId", "sectionId", "evaluatorPersonNumber", "submittedAt", "appraiserType"]
    },
    "TechnologistWeight": {
      "title": "TechnologistWeight",
      "type": "object",
      "description": "Defines weight distribution and appraiser roles based on technologist type.",
      "properties": {
        "technologist_type": {
          "type": "string",
          "enum": ["SENIOR", "JUNIOR"],
          "description": "The type of technologist."
        },
        "workGoalWeight": {
          "type": "number",
          "description": "Weight distribution for work goals."
        },
        "homeGoalWeight": {
          "type": "number",
          "description": "Weight distribution for home goals."
        },
        "primaryAppraiser": {
          "type": "string",
          "enum": ["Work Manager", "Home Manager"],
          "description": "Who acts as the Primary Appraiser."
        },
        "secondaryAppraiser": {
          "type": "string",
          "enum": ["Work Manager", "Home Manager"],
          "description": "Who acts as the Secondary Appraiser."
        }
      },
      "required": ["technologist_type", "workGoalWeight", "homeGoalWeight", "primaryAppraiser", "secondaryAppraiser"]
    }
  },
  "auth": {
    "providers": [
      "password",
      "anonymous"
    ]
  },
  "firestore": {
    "review_periods": {
      "schema": { "$ref": "#/entities/ReviewPeriod" },
      "description": "Stores review period data."
    },
    "performance_cycles": {
      "schema": { "$ref": "#/entities/PerformanceCycle" },
      "description": "Stores performance cycle data, linked to a review period."
    },
    "goal_plans": {
      "schema": { "$ref": "#/entities/GoalPlan" },
      "description": "Stores goal plan data, linked to a review period."
    },
    "goals": {
      "schema": { "$ref": "#/entities/Goal" },
      "description": "Stores individual goals for employees."
    },
    "performance_templates": {
        "schema": { "$ref": "#/entities/PerformanceTemplate" },
        "description": "Stores performance template definitions."
    },
    "performance_template_sections": {
        "schema": { "$ref": "#/entities/PerformanceTemplateSection" },
        "description": "Stores sections for performance templates."
    },
    "evaluation_flows": {
        "schema": { "$ref": "#/entities/EvaluationFlow" },
        "description": "Stores evaluation flow definitions."
    },
    "eligibility_criteria": {
        "schema": { "$ref": "#/entities/EligibilityCriteria" },
        "description": "Stores eligibility criteria rules."
    },
    "performance_documents": {
        "schema": { "$ref": "#/entities/PerformanceDocument" },
        "description": "Stores assembled performance documents."
    },
    "employee_performance_documents": {
        "schema": { "$ref": "#/entities/EmployeePerformanceDocument" },
        "description": "Stores individual performance documents for each employee."
    },
    "employee_appraiser_mappings": {
        "schema": { "$ref": "#/entities/AppraiserMapping" },
        "description": "Stores appraiser mappings for each employee performance document."
    },
    "employees": {
        "schema": { "$ref": "#/entities/Employee" },
        "description": "Stores employee data."
    },
    "evaluations": {
      "schema": { "$ref": "#/entities/EmployeeEvaluation" },
      "description": "Stores individual section evaluations from users."
    },
    "technologist_weights": {
      "schema": { "$ref": "#/entities/TechnologistWeight" },
      "description": "Stores weight distribution configurations for technologist types."
    }
  }
}
